!function(){"use strict";angular.module("app",["ct.ui.router.extras","ngMaterial","PPVN","ui.router"])}(),function(){"use strict";angular.module("app").config(["$mdThemingProvider",function(t){t.theme("default").primaryPalette("blue-grey").accentPalette("orange")}])}(),function(){"use strict";angular.module("app").run(["$state","$rootScope",function(t,e){e.$state=t}]).config(["$locationProvider","$stateProvider","$urlRouterProvider",function(t,e,n){n.otherwise("/404"),e.state("root",{url:"/",sticky:!0,dsr:!0,views:{admin:{templateUrl:"app/admin/admin.html"},error:{templateUrl:"app/404/404.html"},home:{templateUrl:"app/home/home.html"},treasure:{templateUrl:"app/treasure/treasure.html"}}}).state("root.admin",{url:"admin"}).state("root.error",{url:"404"}).state("root.home",{url:""}).state("root.treasure",{url:"treasure"}),t.html5Mode(!0)}])}(),function(){"use strict";angular.module("app").controller("404",["$scope","$state","$window",function(t,e,n){var o=this;o.supportEmail="jknight@lunenfeld.ca",o.reportError=function(t){n.open("mailto:"+o.supportEmail+"?subject="+t,"_self")}}])}(),function(){"use strict";angular.module("app").service("credentials",["$rootScope",function(t){var e={};this.get=function(){return e},this.set=function(n){e=n,t.$broadcast("credentials:updated",e)}}])}(),function(){"use strict";angular.module("app").service("signoutUnload",["$window",function(t){t.onbeforeunload=function(t){var e=gapi.auth2.getAuthInstance();e.disconnect().then(function(){})}}]).run(["signoutUnload",function(t){}])}(),function(){"use strict";angular.module("app").directive("googleSignin",["credentials",function(t){var e=/\.apps\.googleusercontent\.com$/;return{restrict:"A",link:function(n,o,i){function r(e){var n={};for(var o in e)"object"==typeof e[o]&&(e[o].hasOwnProperty("U3")&&(n.email=e[o].U3),e[o].hasOwnProperty("ig")&&(n.name=e[o].ig),e[o].hasOwnProperty("access_token")&&(n.token=e[o].access_token));t.set(n),document.getElementsByClassName("google-text")[0].innerHTML="Signed in"}function a(e){t.set({})}i.clientid+=e.test(i.clientid)?"":".apps.googleusercontent.com",i.$set("data-clientid",i.clientid);var s={onsuccess:r,cookiepolicy:"single_host_origin",onfailure:a,scope:"email",access_type:"offline",customtargetid:"google-signin"};s.clientid=i.clientid;var c=document.getElementsByTagName("link")[0],u=document.createElement("link");u.type="text/css",u.async=!0,u.rel="stylesheet",u.href="https://fonts.googleapis.com/css?family=Roboto",c.parentNode.insertBefore(u,c);var l=document.getElementsByTagName("script")[0],p=document.createElement("script");p.type="text/javascript",p.async=!0,p.src="https://apis.google.com/js/client:platform.js",l.parentNode.insertBefore(p,l),p.onload=function(){gapi.load("auth2",function(){var t=gapi.auth2.init({client_id:s.clientid,cookie_policy:s.cookiepolicy});t.attachClickHandler(s.customtargetid,{},s.onsuccess,s.onfailure)})}}}}])}(),function(){"use strict";angular.module("app").directive("googleSignout",["credentials","$state",function(t,e){return{restrict:"A",link:function(n,o,i){o.bind("click",function(n){n.stopPropagation();var o=gapi.auth2.getAuthInstance();o.disconnect().then(function(){t.set({}),document.getElementsByClassName("google-text")[0].innerHTML="Sign in",e.go("root.home")})})}}}])}(),function(){"use strict";angular.module("app").controller("signin",["$scope","credentials",function(t,e){var n=this;n.signedIn=!1,t.$on("credentials:updated",function(e,o){o.name?(n.signedIn=!0,t.$digest()):(n.signedIn=!1,t.$digest())})}])}();