!function(){"use strict";angular.module("app",["ct.ui.router.extras","ngMaterial","PPVN","ui.router"])}(),function(){"use strict";angular.module("app").config(["$mdThemingProvider",function(t){t.theme("default").primaryPalette("blue-grey").accentPalette("orange")}])}(),function(){"use strict";angular.module("app").run(["$state","$rootScope",function(t,e){e.$state=t}]).config(["$locationProvider","$stateProvider","$urlRouterProvider",function(t,e,n){n.otherwise("/404"),e.state("root",{url:"/",sticky:!0,dsr:!0,views:{admin:{templateUrl:"app/admin/admin.html"},error:{templateUrl:"app/404/404.html"},home:{templateUrl:"app/home/home.html"},treasure:{templateUrl:"app/treasure/treasure.html"}}}).state("root.admin",{url:"admin"}).state("root.error",{url:"404"}).state("root.home",{url:""}).state("root.treasure",{url:"treasure"}),t.html5Mode(!0)}])}(),function(){"use strict";angular.module("app").controller("404",["$scope","$state","$window",function(t,e,n){var i=this;i.supportEmail="jknight@lunenfeld.ca",i.reportError=function(t){n.open("mailto:"+i.supportEmail+"?subject="+t,"_self")}}])}(),function(){"use strict";angular.module("app").service("credentials",["$rootScope",function(t){var e={};this.get=function(){return e},this.set=function(n){e=n,t.$broadcast("credentials:updated",e)}}])}(),function(){"use strict";angular.module("app").service("signinCallbacks",["credentials","$rootScope",function(t,e){var n={};this.success=function(i){for(var o in i)"object"==typeof i[o]&&(i[o].hasOwnProperty("U3")&&(n.email=i[o].U3),i[o].hasOwnProperty("ig")&&(n.name=i[o].ig),i[o].hasOwnProperty("access_token")&&(n.token=i[o].access_token));t.set(n),e.$broadcast("signin:updated",{text:"Signed in"})},this.failure=function(e){t.set({})}}])}(),function(){"use strict";angular.module("app").service("signoutUnload",["$window",function(t){t.onbeforeunload=function(t){var e=gapi.auth2.getAuthInstance();e.disconnect().then(function(){})}}]).run(["signoutUnload",function(t){}])}(),function(){"use strict";angular.module("app").directive("googleSignin",["signinCallbacks",function(t){var e=/\.apps\.googleusercontent\.com$/;return{restrict:"A",link:function(n,i,o){o.clientid+=e.test(o.clientid)?"":".apps.googleusercontent.com";var a={access_type:"offline",clientid:o.clientid,cookiepolicy:"single_host_origin",customtargetid:"google-signin",onfailure:t.failure,onsuccess:t.success,scope:"email"},r=document.getElementsByTagName("link")[0],s=document.createElement("link");s.type="text/css",s.async=!0,s.rel="stylesheet",s.href="https://fonts.googleapis.com/css?family=Roboto",r.parentNode.insertBefore(s,r);var c=document.getElementsByTagName("script")[0],u=document.createElement("script");u.type="text/javascript",u.async=!0,u.src="https://apis.google.com/js/client:platform.js",c.parentNode.insertBefore(u,c),u.onload=function(){gapi.load("auth2",function(){var t=gapi.auth2.init({client_id:a.clientid,cookie_policy:a.cookiepolicy});t.attachClickHandler(a.customtargetid,{},a.onsuccess,a.onfailure)})}}}}])}(),function(){"use strict";angular.module("app").directive("googleSignout",["credentials","$rootScope","$state",function(t,e,n){return{restrict:"A",link:function(n,i,o){i.bind("click",function(n){n.stopPropagation();var i=gapi.auth2.getAuthInstance();i.disconnect().then(function(){t.set({}),e.$broadcast("signin:updated",{text:"Sign in"})})})}}}])}(),function(){"use strict";angular.module("app").controller("signin",["$scope","credentials",function(t,e){var n=this;n.signedIn=!1,n.signedInText="Sign in",t.$on("credentials:updated",function(e,i){i.name?(n.signedIn=!0,t.$digest()):(n.signedIn=!1,t.$digest())}),t.$on("signin:updated",function(e,i){i.text&&(n.signedInText=i.text,t.$digest())})}])}();