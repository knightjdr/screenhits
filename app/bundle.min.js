!function(e){e.__env=e.__env||{},e.__env.apiUrl="http://localhost:8003",e.__env.baseUrl="/",e.__env.supportEmail="jknight@lunenfeld.ca",e.__env.supportName="James Knight",e.__env.clientID="498894175021-2v85kl2dnmnsqsaqo94a5ls6gsjbj7u4"}(this),function(){"use strict";angular.module("app",["ct.ui.router.extras","ngAnimate","ngMaterial","ngMessages","ngSanitize","PPVN","ui.router"])}(),function(){"use strict";angular.module("app").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue-grey").accentPalette("orange").foregroundPalette[3]="#455a64"}]).constant("__env",window.__env)}(),function(){"use strict";angular.module("app").run(["$state","$rootScope",function(e,t){t.$state=e}]).config(["$locationProvider","$stateProvider","$urlRouterProvider",function(e,t,n){n.otherwise("/404"),t.state("root",{url:"/",sticky:!0,dsr:!0,views:{admin:{templateUrl:"app/admin/admin.html"},close:{templateUrl:"app/404/close.html"},error:{templateUrl:"app/404/404.html"},home:{templateUrl:"app/home/home.html"},profile:{templateUrl:"app/profile/profile.html"},treasure:{templateUrl:"app/404/treasure.html"}}}).state("root.admin",{url:"admin"}).state("root.close",{url:"treasure"}).state("root.error",{url:"404"}).state("root.home",{url:""}).state("root.profile",{url:"profile"}).state("root.treasure",{url:"0111010001110010011001010110000101110011011101010111001001100101"}),e.html5Mode(!0)}])}(),function(){"use strict";angular.module("app").directive("collapse",[function(){return{restrict:"A",link:function(e,t,n){var i=n.collapse,o=t[0].closest("."+i),r=o.querySelector(".collapse-container"),a=o.querySelector(".collapse-header");r.style.transition="all 500ms",r.style.webkitTransition="all 500ms",a.style.transition="all 500ms",a.style.webkitTransition="all 500ms",t.bind("click",function(e){var n=o.querySelector(".collapse-icons-other"),s=o.querySelector('[expand="'+i+'"]');n.style.display="none",r.style.display="none",a.style.display="block",t[0].style.display="none",s.style.display="inline"})}}}]).directive("expand",[function(){return{restrict:"A",link:function(e,t,n){var i=n.expand,o=t[0].closest("."+i);t[0].style.display="none",t.bind("click",function(e){var n=o.querySelector(".collapse-icons-other"),r=o.querySelector('[collapse="'+i+'"]'),a=o.querySelector(".collapse-container"),s=o.querySelector(".collapse-header");n.style.display="inline",r.style.display="inline",a.style.display="inline",s.style.display="none",t[0].style.display="none"})}}}])}(),function(){"use strict";angular.module("app").directive("flipMenu",[function(){return{restrict:"A",link:function(e,t,n){var i=n.flipMenu,o=document.getElementById(i),r=n.flipMenuHeight,a=n.flipMenuWidth;o&&(o.style.maxHeight="0px",o.style.minWidth="0px",o.style.overflow="hidden",o.style.transformOrigin="left center",o.style.transform="rotateY(90deg)",o.style.visibility="hidden",o.style.webkitTransform="rotateY(90deg)",o.style.width="0px",t.bind("click",function(){"rotateY(90deg)"===o.style.webkitTransform?(o.style.transition="all 500ms",o.style.maxHeight=r,o.style.minWidth=a,o.style.transform="rotateY(0deg)",o.style.visibility="visible",o.style.webkitTransform="rotateY(0deg)",o.style.width="auto"):(o.style.maxHeight="0px",o.style.minWidth="0px",o.style.transform="rotateY(90deg)",o.style.visibility="hidden",o.style.webkitTransform="rotateY(90deg)",o.style.width="0px")}))}}}])}(),function(){"use strict";angular.module("app").directive("mdTooltipDestroy",[function(){return{restrict:"A",link:function(e,t,n){t.bind("click",function(e){var t=document.getElementsByTagName("md-tooltip")[0];t&&t.remove()})}}}])}(),function(){"use strict";angular.module("app").controller("404",["__env","helperReport","$scope","$window",function(e,t,n,i){var o=this;o.supportName=e.supportName,o.reportError=function(e){t.mail(e)}}])}(),function(){"use strict";angular.module("app").service("credentials",["$rootScope",function(e){var t={};this.get=function(){return t},this.set=function(n){t=n,e.$broadcast("credentials:updated",t)}}])}(),function(){"use strict";angular.module("app").directive("compile",["$compile",function(e){return function(t,n,i){var o=t.$watch(function(e){return e.$eval(i.compile)},function(i){n.html(i),e(n.contents())(t),o()})}}])}(),function(){"use strict";angular.module("app").service("helperDialog",["$http","$mdDialog",function(e,t){this.alert=function(e,n){t.show({clickOutsideToClose:!0,controller:"alert",controllerAs:"vm",locals:{message:n,title:e},parent:angular.element(document.body),templateUrl:"app/dialogs/alert/alert.html"})}}])}(),function(){"use strict";angular.module("app").service("helperHTTP",["credentials","__env","helperDialog","$http",function(e,t,n,i){this.set=function(o,r,a,s){var l=e.get();i({method:"POST",url:t.apiUrl+"/"+o,headers:{"Content-Type":"application/json",user:JSON.stringify(l)},data:r}).then(function(e){e.data.status?s(e):a(e)},function(){n.alert("Connection error","The server could not be reached.")})}}])}(),function(){"use strict";angular.module("app").service("helperReport",["__env","$window",function(e,t){this.mail=function(t){var n="mailto:"+e.supportEmail+"?subject="+t;window.location.href=n}}])}(),function(){"use strict";angular.module("app").service("signinCallbacks",["credentials","helperDialog","helperHTTP","$rootScope",function(e,t,n,i){var o={};this.success=function(r){for(var a in r)"object"==typeof r[a]&&r[a].hasOwnProperty("access_token")&&(o.token=r[a].access_token);var s=function(e){var n=gapi.auth2.getAuthInstance();n.disconnect(),t.alert("Sign-in failed",e.data.message)},l=function(t){e.set(t.data.user),i.$broadcast("signin:updated",{text:"Signed in"})};n.set("login",o,l,s)},this.failure=function(t){e.set({})}}])}(),function(){"use strict";angular.module("app").service("signoutUnload",["helperHTTP","$window",function(e,t){t.onbeforeunload=function(t){e.set("logout",{},function(){},function(){});var n=gapi.auth2.getAuthInstance();n.disconnect().then(function(){})}}]).run(["signoutUnload",function(e){}])}(),function(){"use strict";angular.module("app").directive("googleSignin",["signinCallbacks",function(e){var t=/\.apps\.googleusercontent\.com$/;return{restrict:"A",link:function(n,i,o){o.clientid+=t.test(o.clientid)?"":".apps.googleusercontent.com";var r={access_type:"offline",clientid:o.clientid,cookiepolicy:"single_host_origin",customtargetid:"google-signin",onfailure:e.failure,onsuccess:e.success,scope:"email"},a=document.getElementsByTagName("link")[0],s=document.createElement("link");s.type="text/css",s.async=!0,s.rel="stylesheet",s.href="https://fonts.googleapis.com/css?family=Roboto",a.parentNode.insertBefore(s,a);var l=document.getElementsByTagName("script")[0],c=document.createElement("script");c.type="text/javascript",c.async=!0,c.src="https://apis.google.com/js/client:platform.js",l.parentNode.insertBefore(c,l),c.onload=function(){gapi.load("auth2",function(){var e=gapi.auth2.init({client_id:r.clientid,cookie_policy:r.cookiepolicy});e.attachClickHandler(r.customtargetid,{},r.onsuccess,r.onfailure)})}}}}])}(),function(){"use strict";angular.module("app").directive("googleSignout",["credentials","$rootScope","$state",function(e,t,n){return{restrict:"A",link:function(n,i,o){i.bind("click",function(n){n.stopPropagation();var i=gapi.auth2.getAuthInstance();i.disconnect().then(function(){e.set({}),t.$broadcast("signin:updated",{text:"Sign in"})})})}}}])}(),function(){"use strict";angular.module("app").controller("signin",["__env","$scope","$state","$timeout",function(e,t,n,i){var o=this;o.clientID=e.clientID,o.signedIn=!1,o.signedInText="Sign in",t.$on("credentials:updated",function(e,r){r.name?(o.signedIn=!0,o.user=r.name,i(function(){t.$digest(),n.go("root.profile")})):(o.signedIn=!1,i(function(){t.$digest()}))}),t.$on("signin:updated",function(e,n){n.text&&(o.signedInText=n.text,i(function(){t.$digest()}))})}])}(),function(){"use strict";angular.module("app").controller("alert",["__env","helperReport","$mdDialog","$scope","message","title",function(e,t,n,i,o,r){var a=this;a.close=function(){n.hide()},a.message=o,a.reportError=function(e){t.mail(e)},a.supportName=e.supportName,a.title=r}])}(),function(){"use strict";angular.module("app").controller("profile",["$scope",function(e){var t=this;t.checkLocation=function(e,t){return!e||/^main-*/.test(e)?t:!t},t.introduction=!0,t.newProject=function(){t.introduction=!1,t.location="main-project-new",angular.element(document.getElementById("projects-button")).triggerHandler("click")},t.projects=[{title:"Project 1",created:1478030151,creator:"Someone A",description:"a project description",projectid:1,screens:[{approach:"dropout",cellLine:"HeLa",condition:"drug treatment",created:1478030151,creator:"Someone A",experiments:[{created:1478030151,details:"time points and drug concentrations",experimenter:"Someone C",experimentid:1,projectid:1,protocols:{type:"protocol.pdf"},screenid:1}],library:"library 1",projectid:1,screenid:1,species:"Homo sapiens",title:"Screen 1",type:"knockout"},{approach:"positive selection",cellLine:"U2OS",condition:"genetic alteraion",created:1478030151,creator:"Someone B",experiments:[{created:1478030151,details:"time points and drug concentrations",experimenter:"Someone D",experimentid:2,projectid:1,protocols:{type:"protocol.pdf"},screenid:2}],library:"library 2",projectid:1,screenid:2,species:"Homo sapiens",title:"Screen 2",type:"overexpression"}]}],t.selectProject=function(e){t.project&&t.project===e||(t.experiment="",t.project=e,t.sample="",t.screen=""),t.introduction=!1,t.location="main-project",angular.element(document.getElementById("projects-button")).triggerHandler("click")},t.user="Someone"}])}(),function(){"use strict";angular.module("app").controller("projectNew",["credentials","helperHTTP","$scope",function(e,t,n){var i=this;i.form={},i.reset=function(){n.form.name="",n.form.$setPristine(),n.form.$setUntouched(),i.form={},i.message=""},i.submit=function(n,o){if(i.message="",n){var r=e.get(),a={};a.created=Date.now(),a.creator=r.name,a.description=o.description,a.title=o.name;var s=function(e){i.message=e.data.message,i.reset()},l=function(e){i.message=e.data.message};t.set("project",a,s,l)}}}])}(),function(){"use strict";angular.module("app").controller("projectManagement",["$scope",function(e){var t=this;t.form={addUser:{email:"",name:""}},t.reset=function(){e.addUserForm.email="",e.addUserForm.name="",e.addUserForm.$setPristine(),e.addUserForm.$setUntouched(),t.form.addUser.email="",t.form.addUser.name=""},t.submit=function(e){if(e.email&&e.email.match(/^.+@.+\..+$/)||e.name){var t={};e.name&&(t.name=e.name),e.email&&e.email.match(/^.+@.+\..+$/)&&(t.name=e.email)}}}])}();